<p-table
    #dt
    [value]="products"
    dataKey="productNumber"
    [rows]="10"
    [rowsPerPageOptions]="[5, 10, 20]"
    [loading]="loading"
    [paginator]="true"
    [globalFilterFields]="['productNumber', 'productName', 'productDescription', 'inventory', 'price']"
    [tableStyle]="{ 'min-width': '75rem' }"
>
    <!-- Globaler Filter -->
    <ng-template pTemplate="caption">
        <div class="flex">
            <p-iconField iconPosition="left" class="ml-auto">
                <p-inputIcon>
                    <i class="pi pi-search"></i>
                </p-inputIcon>
                <input
                    pInputText
                    type="text"
                    (input)="dt.filterGlobal($event.target, 'contains')"
                    placeholder="Suche nach Produkt"
                />
            </p-iconField>
        </div>
    </ng-template>

    <!-- Tabellenkopf mit Spaltenfiltern -->
    <ng-template pTemplate="header">
        <tr>
            <th pSortableColumn="productNumber">Produktnummer <p-sortIcon field="productNumber"></p-sortIcon></th>
            <th pSortableColumn="productName">Produktname <p-sortIcon field="productName"></p-sortIcon></th>
            <th pSortableColumn="productDescription">Beschreibung <p-sortIcon field="productDescription"></p-sortIcon></th>
            <th pSortableColumn="inventory">Bestand <p-sortIcon field="inventory"></p-sortIcon></th>
            <th pSortableColumn="price">Preis <p-sortIcon field="price"></p-sortIcon></th>
        </tr>
        <tr>
            <th>
                <p-columnFilter
                    type="text"
                    field="productNumber"
                    placeholder="Filter Produktnummer"
                    ariaLabel="Filter Produktnummer"
                ></p-columnFilter>
            </th>
            <th>
                <p-columnFilter
                    type="text"
                    field="productName"
                    placeholder="Filter Produktname"
                    ariaLabel="Filter Produktname"
                ></p-columnFilter>
            </th>
            <th>
                <p-columnFilter
                    type="text"
                    field="productDescription"
                    placeholder="Filter Beschreibung"
                    ariaLabel="Filter Beschreibung"
                ></p-columnFilter>
            </th>
            <th>
                <p-columnFilter
                    type="text"
                    field="inventory"
                    placeholder="Filter Bestand"
                    ariaLabel="Filter Bestand"
                ></p-columnFilter>
            </th>
            <th>
                <p-columnFilter
                    type="text"
                    field="price"
                    placeholder="Filter Preis"
                    ariaLabel="Filter Preis"
                ></p-columnFilter>
            </th>
        </tr>
    </ng-template>

    <!-- Tabellenkörper -->
    <ng-template pTemplate="body" let-product>
        <tr>
            <td>{{ product.productNumber }}</td>
            <td>{{ product.productName }}</td>
            <td>{{ product.productDescription }}</td>
            <td>{{ product.inventory }}</td>
            <td>{{ product.price | currency }}</td>
        </tr>
    </ng-template>

    <!-- Leere Nachricht -->
    <ng-template pTemplate="emptymessage">
        <tr>
            <td colspan="5">Keine Produkte gefunden.</td>
        </tr>
    </ng-template>
</p-table>

<!-- Dialog zum Hinzufügen eines neuen Produkts -->
<p-dialog [(visible)]="productDialog" header="Neues Produkt hinzufügen" [modal]="true" [closable]="true">
    <div class="p-fluid">
        <div class="p-field">
            <label for="productName">Produktname</label>
            <input id="productName" type="text" pInputText [(ngModel)]="newProduct.productName" />
        </div>
        <div class="p-field">
            <label for="productDescription">Beschreibung</label>
            <input id="productDescription" type="text" pInputText [(ngModel)]="newProduct.productDescription" />
        </div>
        <div class="p-field">
            <label for="inventory">Bestand</label>
            <input id="inventory" type="number" pInputText [(ngModel)]="newProduct.inventory" />
        </div>
        <div class="p-field">
            <label for="price">Preis</label>
            <input id="price" type="number" pInputText [(ngModel)]="newProduct.price" />
        </div>
    </div>
    <p-footer>
        <button pButton label="Abbrechen" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
        <button pButton label="Speichern" icon="pi pi-check" (click)="saveProduct()"></button>
    </p-footer>
</p-dialog>

<!-- Button zum Öffnen des Dialogs -->
<button pButton label="Neues Produkt hinzufügen" icon="pi pi-plus" class="mt-4" (click)="openNewProductDialog()"></button>
